<!DOCTYPE html><html><head><meta charset="utf-8"><title>OpenEHR REST EHR API</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.right .hljs-comment{color:#969896}.right .css .hljs-class,.right .css .hljs-id,.right .css .hljs-pseudo,.right .hljs-attribute,.right .hljs-regexp,.right .hljs-tag,.right .hljs-variable,.right .html .hljs-doctype,.right .ruby .hljs-constant,.right .xml .hljs-doctype,.right .xml .hljs-pi,.right .xml .hljs-tag .hljs-title{color:#c66}.right .hljs-built_in,.right .hljs-constant,.right .hljs-literal,.right .hljs-number,.right .hljs-params,.right .hljs-pragma,.right .hljs-preprocessor{color:#de935f}.right .css .hljs-rule .hljs-attribute,.right .ruby .hljs-class .hljs-title{color:#f0c674}.right .hljs-header,.right .hljs-inheritance,.right .hljs-name,.right .hljs-string,.right .hljs-value,.right .ruby .hljs-symbol,.right .xml .hljs-cdata{color:#b5bd68}.right .css .hljs-hexcolor,.right .hljs-title{color:#8abeb7}.right .coffeescript .hljs-title,.right .hljs-function,.right .javascript .hljs-title,.right .perl .hljs-sub,.right .python .hljs-decorator,.right .python .hljs-title,.right .ruby .hljs-function .hljs-title,.right .ruby .hljs-title .hljs-keyword{color:#81a2be}.right .hljs-keyword,.right .javascript .hljs-function{color:#b294bb}.right .hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:.5em;-webkit-text-size-adjust:none}.right .coffeescript .javascript,.right .javascript .xml,.right .tex .hljs-formula,.right .xml .css,.right .xml .hljs-cdata,.right .xml .javascript,.right .xml .vbscript{opacity:.5}body{color:black;background:white;font:400 14px / 1.42 'Roboto',Helvetica,sans-serif}header{border-bottom:1px solid #ededed;margin-bottom:12px}h1,h2,h3,h4,h5{color:black;margin:12px 0}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:0;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}.triple h1 .permalink,.triple h2 .permalink,.triple h3 .permalink,.triple h4 .permalink,.triple h5 .permalink{opacity:.15}.triple h1:hover .permalink,.triple h2:hover .permalink,.triple h3:hover .permalink,.triple h4:hover .permalink,.triple h5:hover .permalink{opacity:.15}h1{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:36px}h2{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:30px}h3{font-size:100%;text-transform:uppercase}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}a{color:#18bc9c;text-decoration:none}li p{margin:0}hr.split{border:0;height:1px;width:100%;padding-left:6px;margin:12px auto;background-image:linear-gradient(to right, rgba(0,0,0,0) 20%, rgba(0,0,0,0.2) 51.4%, rgba(255,255,255,0.2) 51.4%, rgba(255,255,255,0) 80%)}dl dt{float:left;width:130px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:150px}blockquote{color:rgba(0,0,0,0.5);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px;overflow:auto}pre code{color:black;background-color:transparent;padding:0;border:none}code{color:#444;background-color:#f5f5f5;font:'Inconsolata',monospace;padding:1px 4px;border:1px solid #cfcfcf;border-radius:3px}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0;margin-bottom:12px}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #e6e6e6}.text-muted{opacity:.5}.note,.warning{padding:.3em 1em;margin:1em 0;border-radius:2px;font-size:90%}.note h1,.warning h1,.note h2,.warning h2,.note h3,.warning h3,.note h4,.warning h4,.note h5,.warning h5,.note h6,.warning h6{font-family:200 36px 'Raleway',Helvetica,sans-serif;font-size:135%;font-weight:500}.note p,.warning p{margin:.5em 0}.note{color:black;background-color:#eff7fc;border-left:4px solid #3498db}.note h1,.note h2,.note h3,.note h4,.note h5,.note h6{color:#3498db}.warning{color:black;background-color:#fcf0ef;border-left:4px solid #d62c1a}.warning h1,.warning h2,.warning h3,.warning h4,.warning h5,.warning h6{color:#d62c1a}header{margin-top:24px}nav{position:fixed;top:24px;bottom:0;overflow-y:auto}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:black;opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #ededed;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:14px;padding:3px 7px;font-size:12px;color:#000;background-color:#ededed;border-radius:10px;margin:-2px 0}.badge.get{color:white;background-color:#3498db}.badge.head{color:white;background-color:#3498db}.badge.options{color:white;background-color:#3498db}.badge.put{color:white;background-color:#f39c12}.badge.patch{color:white;background-color:#f39c12}.badge.post{color:white;background-color:#18bc9c}.badge.delete{color:white;background-color:#e74c3c}.collapse-button{float:right}.collapse-button .close{display:none;color:#18bc9c;cursor:pointer}.collapse-button .open{color:#18bc9c;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:244px;width:696px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%}.container-fluid.triple nav{width:16.5%;padding-right:1px}.container-fluid.triple .row .content{position:relative;margin-left:16.5%;padding-left:24px}.middle:before,.middle:after{content:'';display:table}.middle:after{clear:both}.middle{box-sizing:border-box;width:51.5%;padding-right:12px}.right{box-sizing:border-box;float:right;width:48.5%;padding-left:12px}.right a{color:#18bc9c}.right h1,.right h2,.right h3,.right h4,.right h5,.right p,.right div{color:white}.right pre{background-color:#1d1f21;border:1px solid #1d1f21}.right pre code{color:#c5c8c6}.right .description{margin-top:12px}.triple .resource-heading{font-size:125%}.definition{margin-top:12px;margin-bottom:12px}.definition .method{font-weight:bold}.definition .method.get{color:#2e80b8}.definition .method.head{color:#2e80b8}.definition .method.options{color:#2e80b8}.definition .method.post{color:#2eb89d}.definition .method.put{color:#b8822e}.definition .method.patch{color:#b8822e}.definition .method.delete{color:#b83b2e}.definition .uri{word-break:break-all;word-wrap:break-word}.definition .hostname{opacity:.5}.example-names{background-color:#eee;padding:12px;border-radius:6px}.example-names .tab-button{cursor:pointer;color:black;border:1px solid #ddd;padding:6px;margin-left:12px}.example-names .tab-button.active{background-color:#d5d5d5}.right .example-names{background-color:#444}.right .example-names .tab-button{color:white;border:1px solid #666;border-radius:6px}.right .example-names .tab-button.active{background-color:#5e5e5e}#nav-background{position:fixed;left:0;top:0;bottom:0;width:16.5%;padding-right:14.4px;background-color:#fbfbfb;border-right:1px solid #f0f0f0;z-index:-1}#right-panel-background{position:absolute;right:-12px;top:-12px;bottom:-12px;width:48.6%;background-color:#333;z-index:-1}@media (max-width:1200px){nav{width:198px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:169.4px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content,.container-fluid.triple .row .content{margin-left:auto;margin-right:auto;width:95%}#nav-background{display:none}#right-panel-background{width:48.6%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.5);background-color:#ededed;text-decoration:none !important;border-top:1px solid #ededed;border-left:1px solid #ededed;border-right:1px solid #ededed;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #ededed;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#ededed;border-bottom:1px solid #ededed;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.triple .content .resource-group{padding:0;border:none}.triple .content .resource-group h2.group-heading,.triple .content .resource-group .heading a{margin:0 0 12px 0;border:1px solid #ededed}nav .resource-group .heading a{padding:12px;margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4.action-heading{padding:6px 12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;overflow:hidden}.action h4.action-heading .name{float:right;font-weight:normal;padding:6px 0}.action h4.action-heading .method{padding:6px 12px;margin-right:12px;border-radius:3px;display:inline-block}.action h4.action-heading .method.get{color:#000;background-color:white}.action h4.action-heading .method.head{color:#000;background-color:white}.action h4.action-heading .method.options{color:#000;background-color:white}.action h4.action-heading .method.put{color:#000;background-color:white}.action h4.action-heading .method.patch{color:#000;background-color:white}.action h4.action-heading .method.post{color:#000;background-color:white}.action h4.action-heading .method.delete{color:#000;background-color:white}.action h4.action-heading code{color:#444;background-color:rgba(255,255,255,0.7);border-color:transparent;font-weight:normal;word-break:break-all;display:inline-block;margin-top:2px}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#3498db}.action.get h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.head{border-color:#3498db}.action.head h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.options{border-color:#3498db}.action.options h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.post{border-color:#18bc9c}.action.post h4.action-heading{color:white;background:#18bc9c;border-bottom-color:#18bc9c}.action.put{border-color:#f39c12}.action.put h4.action-heading{color:white;background:#f39c12;border-bottom-color:#f39c12}.action.patch{border-color:#f39c12}.action.patch h4.action-heading{color:white;background:#f39c12;border-bottom-color:#f39c12}.action.delete{border-color:#e74c3c}.action.delete h4.action-heading{color:white;background:#e74c3c;border-bottom-color:#e74c3c}h1,h2,h3,h4,h5{color:black;margin:1.2em 0 14px 0}.triple .content .resource-group{padding-top:25px}h3{font-size:110%}.triple h3.resource-heading{font-size:130%}code{padding:0 3px}</style></head><body class="preload"><div id="nav-background"></div><div class="container-fluid triple"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#top">Overview</a></div><div class="collapse-content"><ul><li><a href="#header-preface">Preface</a></li><li><a href="#header-glossary-and-conventions">Glossary and conventions</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#design-considerations">Design considerations</a></div><div class="collapse-content"><ul><li><a href="#design-considerations-authentication-and-authorization">Authentication and authorization</a><ul></ul></li><li><a href="#design-considerations-options-and-conformance-options"><span class="badge options"><i class="fa fa-dot-circle-o"></i></span>Options and conformance</a></li><li><a href="#design-considerations-http-headers">HTTP headers</a><ul></ul></li><li><a href="#design-considerations-http-status-codes">HTTP status codes</a><ul></ul></li><li><a href="#design-considerations-data-representation">Data representation</a><ul></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#ehr">EHR</a></div><div class="collapse-content"><ul><li><a href="#ehr-ehr">EHR</a><ul><li><a href="#ehr-ehr-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create EHR</a></li><li><a href="#ehr-ehr-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Create EHR with id</a></li><li><a href="#ehr-ehr-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR summary by id</a></li><li><a href="#ehr-ehr-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR summary by subject id</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#ehr_status">EHR_STATUS</a></div><div class="collapse-content"><ul><li><a href="#ehr_status-ehr_status">EHR_STATUS</a><ul><li><a href="#ehr_status-ehr_status-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS version by time</a></li><li><a href="#ehr_status-ehr_status-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS by version id</a></li><li><a href="#ehr_status-ehr_status-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update EHR_STATUS</a></li></ul></li><li><a href="#ehr_status-versioned_ehr_status">VERSIONED_EHR_STATUS</a><ul><li><a href="#ehr_status-versioned_ehr_status-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned EHR_STATUS</a></li><li><a href="#ehr_status-versioned_ehr_status-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned EHR_STATUS version by time</a></li><li><a href="#ehr_status-versioned_ehr_status-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned EHR_STATUS version by id</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#composition">COMPOSITION</a></div><div class="collapse-content"><ul><li><a href="#composition-composition">COMPOSITION</a><ul><li><a href="#composition-composition-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create composition</a></li><li><a href="#composition-composition-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update composition</a></li><li><a href="#composition-composition-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete composition</a></li><li><a href="#composition-composition-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get composition by version id</a></li><li><a href="#composition-composition-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get composition at time</a></li></ul></li><li><a href="#composition-versioned_composition">VERSIONED_COMPOSITION</a><ul><li><a href="#composition-versioned_composition-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned composition</a></li><li><a href="#composition-versioned_composition-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned composition version by id</a></li><li><a href="#composition-versioned_composition-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get versioned composition version at time</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#directory">DIRECTORY</a></div><div class="collapse-content"><ul><li><a href="#directory-directory">Directory</a><ul><li><a href="#directory-directory-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create directory</a></li><li><a href="#directory-directory-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update directory</a></li><li><a href="#directory-directory-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete directory</a></li><li><a href="#directory-directory-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get folder in directory version</a></li><li><a href="#directory-directory-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get folder in directory version at time</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#contribution">CONTRIBUTION</a></div><div class="collapse-content"><ul><li><a href="#contribution-contribution">CONTRIBUTION</a><ul><li><a href="#contribution-contribution-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create contribution</a></li><li><a href="#contribution-contribution-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get contribution by id</a></li></ul></li></ul></div></div><p style="text-align: center; word-wrap: break-word;"><a href="http://www.openehr.org/api/v1">http://www.openehr.org/api/v1</a></p></nav><div class="content"><div id="right-panel-background"></div><div class="middle"><header><h1 id="top">OpenEHR REST EHR API</h1></header></div><div class="right"><h5>API Endpoint</h5><a href="http://www.openehr.org/api/v1">http://www.openehr.org/api/v1</a></div><div class="middle"><p>Release: <strong>0.9.5</strong></p>
<p>Status: <strong><code>DEVELOPMENT</code></strong></p>
<h2 id="header-preface">Preface <a class="permalink" href="#header-preface" aria-hidden="true">¶</a></h2>
<p>Release: <strong>0.9.5</strong></p>
<p><h3>Purpose</h3></p>
<p>This specification describes service endpoints, resources, functions and operations
as well as details of requests and responses that interacts with an openEHR API in a RESTful manner.</p>
<p><h3>Related Documents</h3></p>
<p>Prerequisite documents for reading this document include:</p>
<ul>
<li>The <a href="http://www.openehr.org/releases/BASE/latest/docs/architecture_overview/architecture_overview.html">openEHR Architecture Overview</a></li>
</ul>
<p>Related documents include:</p>
<ul>
<li>
<p>The <a href="http://www.openehr.org/releases/RM/latest/docs/index#_class_index">openEHR RM Class Index</a></p>
</li>
<li>
<p>The <a href="http://www.openehr.org/releases/trunk/its/XML-schema/">RM XSDs</a></p>
</li>
</ul>
<p><h3>Status</h3></p>
<p>This specification is in the DEVELOPMENT state. It might not be complete and can still be subject to changes before the final release.
Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.</p>
<p>Feedback should be provided the <a href="https://openehr.atlassian.net/browse/SPECPR">Specification PR tracker</a> or on <a href="https://github.com/openEHR/specifications-ITS/issues">specifications-ITS</a> issue tracker.</p>
<p><h3>Trademarks</h3></p>
<ul>
<li>‘openEHR’ is a trademark of the <a href="https://www.openEHR.org">openEHR Foundation</a></li>
</ul>
<h2 id="header-glossary-and-conventions">Glossary and conventions <a class="permalink" href="#header-glossary-and-conventions" aria-hidden="true">¶</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL”
in this document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>
<a href="https://tools.ietf.org/html/rfc8174">RFC 8174</a> when, and only when, they appear in all capitals, as shown here.</p>
<p>Types defined by openEHR specification are always capitalized (e.g. EHR, COMPOSITION, VERSIONED_OBJECT, etc.) when used in this specification.
For a list of all available types or a particular type definition please refer to the <a href="http://www.openehr.org/releases/RM/latest/docs/index#_class_index">RM index</a>.</p>
<p>Throughout this specification, a set of short terms is being used as described below:</p>
<table>
<thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ehr_id</code></td>
<td>The value for an EHR identifier, stored under EHR.ehr_id.value, usually an UUID or GUID</td>
</tr>
<tr>
<td><code>versioned_object_uid</code></td>
<td>The value of a VERSIONED_OBJECT unique identifier, stored under VERSIONED_OBJECT.uid.value, e.g. 8849182c-82ad-4088-a07f-48ead4180515</td>
</tr>
<tr>
<td><code>version_uid</code></td>
<td>The value of a VERSION unique identifier, stored under VERSION.uid.value, e.g. 8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::2</td>
</tr>
<tr>
<td><code>preceding_version_uid</code></td>
<td>The value of a previous VERSION unique identifier, used usually for PUT or DELETE methods, e.g. 8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::1</td>
</tr>
<tr>
<td><code>version_at_time</code></td>
<td>Time specifier used to retrieve the VERSION at specified time; the value is a timestamp in the ISO8601 format (e.g. 2015-01-20T19:30:22.765+01:00)</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td>A timestamp in the ISO8601 format (e.g. 2015-01-20T19:30:22.765+01:00)</td>
</tr>
<tr>
<td><code>UUID</code></td>
<td>A universally unique identifier (<a href="https://tools.ietf.org/html/rfc4122">RFC 4122</a>) (e.g. 8849182c-82ad-4088-a07f-48ead4180515)</td>
</tr>
</tbody>
</table>
<p>HTTP Methods used in this specification are described by <a href="https://tools.ietf.org/html/rfc7231#section-4">RFC 7231</a>.
HTTP Status codes are described by <a href="https://tools.ietf.org/html/rfc7231#section-6">RFC 7231</a>
and in the <a href="https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">IANA Status Code Registry</a>.</p>
<p>See <a href="#design-considerations">design considerations section</a> section for more details on how some
HTTP methods and status codes MUST be used by an openEHR REST API implementation to achieve good interaction
between services and clients in the spirit of this specification.</p>
<p><strong>JSON</strong> format is used in many of the example below, but this does not imply that <strong>XML</strong> might not be supported by the same service endpoint.
See below how <a href="#design-considerations-data-representation">data representation</a> MUST be done and negotiated.</p>
</div><div class="middle"><section id="design-considerations" class="resource-group"><h2 class="group-heading">Design considerations <a href="#design-considerations" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="design-considerations-authentication-and-authorization" class="resource"><h3 class="resource-heading">Authentication and authorization <a href="#design-considerations-authentication-and-authorization" class="permalink">&para;</a></h3><p>Services SHOULD implement and support an HTTP Authentication and Authorization framework
(which can support various schemes) but there is no assumption or recommendation being made
in this specification about which authentication scheme should be used by services and clients.
See <a href="https://tools.ietf.org/html/rfc7235">RFC 7235</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication">Mozilla’s HTTP Authentication</a>
for details on this subject.</p>
<p>If an Authentication and Authorisation framework is present, services MUST properly use <code>WWW-Authenticate</code> and/or
<code>Proxy-Authenticate</code> response headers and return HTTP status code <code>403 Forbidden</code> or <code>401 Unauthorized</code> or
<code>407 Proxy Authentication</code> whenever applicable, and clients MUST properly use <code>Authorization</code> and <code>Proxy-Authorization</code>
in their request headers.</p>
</div></div><div class="middle"><div id="design-considerations-options-and-conformance" class="resource"><h3 class="resource-heading">Options and conformance <a href="#design-considerations-options-and-conformance" class="permalink">&para;</a></h3></div></div><div class="right"><div class="definition"><span class="method options">OPTIONS</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">Inspect services and conformance</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Accept</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Allow</span>: <span class="hljs-string">GET, POST, PUT, DELETE, OPTIONS</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">solution</span>": <span class="hljs-value"><span class="hljs-string">"BestEHRSys"</span></span>,
  "<span class="hljs-attribute">solution_version</span>": <span class="hljs-value"><span class="hljs-string">"v0.9"</span></span>,
  "<span class="hljs-attribute">vendor</span>": <span class="hljs-value"><span class="hljs-string">"BestEHR"</span></span>,
  "<span class="hljs-attribute">restapi_specs_version</span>": <span class="hljs-value"><span class="hljs-string">"v1.0"</span></span>,
  "<span class="hljs-attribute">conformance_profile</span>": <span class="hljs-value"><span class="hljs-string">"STANDARD"</span></span>,
  "<span class="hljs-attribute">endpoints</span>": <span class="hljs-value">[
    <span class="hljs-string">"/ehrs"</span>,
    <span class="hljs-string">"/definitions"</span>,
    <span class="hljs-string">"/query"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="design-considerations-options-and-conformance-options" class="action options"><h4 class="action-heading"><div class="name"></div><a href="#design-considerations-options-and-conformance-options" class="method options">OPTIONS</a><code class="uri">/</code></h4><p>The <code>OPTIONS</code> HTTP method allows a client to determine the options and/or requirements associated with a
resource, or the capabilities of the service, without implying a resource action.
Services SHOULD respond to this method with at least appropriate HTTP codes, headers and potentially with a payload
revealing more details themselves.</p>
<p>Another use-case for this method is related to exposing service capabilities for a conformance manifest.</p>
</div></div><hr class="split"><div class="middle"><div id="design-considerations-http-headers" class="resource"><h3 class="resource-heading">HTTP headers <a href="#design-considerations-http-headers" class="permalink">&para;</a></h3><p>This specification is using a few standard and custom HTTP headers that are described below.</p>
<p><h3>The <code>openEHR-VERSION</code> and <code>openEHR-AUDIT_DETAILS</code> headers</h3></p>
<p>When it comes to committing content to an openEHR system, for all change-controlled resources (e.g. COMPOSITION, EHR_STATUS, FOLDER, etc.) the services are
<a href="http://www.openehr.org/releases/RM/latest/docs/common/common.html#_change_control_package">performing versioning</a> under the hood.
Thus, the ‘native’ way of committing content is to wrap it as VERSION and <a href="http://www.openehr.org/releases/RM/latest/docs/common/common.html#_contributions">use CONTRIBUTION</a>.</p>
<p>But in order to keep things simpler and consistent, service MUST allow <code>PUT</code>, <code>POST</code> and <code>DELETE</code> methods also directly on these change-controlled resources.
However, internally, these operations MUST be executed using the ‘native’ way with CONTRIBUTION.</p>
<p>In order to allow clients to provide committal metadata, services MUST accept <code>openEHR-VERSION</code> and <code>openEHR-AUDIT_DETAILS</code> request custom header.
For clients, it is RECOMMENDED to provision these headers based on <a href="#design-considerations-authentication-and-authorization">authentication and authorization</a> runtime data.
Below is an complex example of these request headers used in a PUT action to update a COMPOSITION:</p>
<pre><code class="language-http"><span class="hljs-attribute">openEHR-VERSION.lifecycle_state</span>: <span class="hljs-string">code_string="532"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.change_type</span>: <span class="hljs-string">code_string="251"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.description</span>: <span class="hljs-string">value="An updated composition contribution description"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.committer</span>: <span class="hljs-string">name="John Doe", external_ref.id="BC8132EA-8F4A-11E7-BB31-BE2E44B06B34", external_ref.namespace="demographic", external_ref.type="PERSON"</span></code></pre>
<p>None of these headers are mandatory, but whatever is provided it MUST be merged with the default VERSION and VERSION.audit_details attributes on commit runtime.</p>
<p>Below a list of <code>code_string</code> values and their meaning (taken from <a href="https://raw.githubusercontent.com/openEHR/terminology/Release-2.0.0/openEHR_RM/en/openehr_terminology.xml">openEHR terminology</a>):</p>
<table>
<thead>
<tr>
<th>header</th>
<th>code</th>
<th>value / meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>532</td>
<td>complete</td>
</tr>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>553</td>
<td>incomplete</td>
</tr>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>523</td>
<td>deleted</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>249</td>
<td>creation</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>250</td>
<td>amendment</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>251</td>
<td>modification</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>252</td>
<td>synthesis</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>523</td>
<td>deleted</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>666</td>
<td>attestation</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>253</td>
<td>unknown</td>
</tr>
</tbody>
</table>
<p><h3>The <code>If-Match</code> header and accidental overwrites</h3></p>
<p>The use case of this is described by <a href="https://tools.ietf.org/html/rfc7232#section-3.1">RFC 7232</a>.</p>
<pre><code class="language-http"><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::2</span></code></pre>
<p>This HTTP request header SHOULD be used by the clients to prevent accidental overwrites when multiple user
agents might be acting in parallel on the same resource. This is only required by a small set of resources of this specification,
as in most of the other cases the <code>preceding_version_uid</code> path segment is instead required in order to prevent such accidental overwrites.
In case a service receives this header and the condition evaluates to <code>false</code> it MUST respond with
HTTP status code<code>412 Precondition Failed</code>.</p>
<p><h3>The <code>Location</code> header</h3></p>
<p>This response header indicates the resource location (URL).
According to <a href="https://tools.ietf.org/html/rfc7231#section-7.1.2">RFC 7231</a>, it is used to refer to a specific resource in relation to the response.
The type of relationship is defined by the combination of request method and status code semantics.
Services MUST return this header whenever a create or update operation was performed, but it MAY
return this header on other operation or action. Example:</p>
<pre><code class="language-http"><span class="hljs-attribute">Location</span>: <span class="hljs-string">http://www.openehr.org/api/v1/ehr/347a5490-55ee-4da9-b91a-9bba710f730e/composition/8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::2</span></code></pre>
<p>See <a href="#representation-details-negotiation">representation details negotiation</a> section
for more details on how use this header.</p>
<p>Services MAY generate resource URL as specified by DV_URI/DV_EHR_URI format, and if this feature is supported then the services
MUST use <code>openEHR-uri</code> response header. Example:</p>
<pre><code class="language-http"><span class="hljs-attribute">openEHR-uri</span>: <span class="hljs-string">ehr:/347a5490-55ee-4da9-b91a-9bba710f730e/compositions/87284370-2D4B-4e3d-A3F3-F303D2F4F34B</span></code></pre>
<p><h3>The <code>Prefer</code> header</h3></p>
<p>This request header MAY be used by clients for resource representation negotiation.
See more details on <a href="#representation-details-negotiation">representation details negotiation</a> section.</p>
<p><h3>The <code>ETag</code> and <code>Last-Modified</code> headers</h3></p>
<p>According to <a href="https://tools.ietf.org/html/rfc7232#section-2.3">RFC 7232</a>,</p>
<blockquote>
<p>The “ETag” header field in a response provides the current entity-tag
for the selected representation, as determined at the conclusion of
handling the request.  An entity-tag is an opaque validator for
differentiating between multiple representations of the same
resource, regardless of whether those multiple representations are
due to resource state changes over time, content negotiation
resulting in multiple representations being valid at the same time,
or both.</p>
</blockquote>
<pre><code class="language-http"><span class="hljs-attribute">ETag</span>: <span class="hljs-string">8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::2</span></code></pre>
<p>The <code>Last-Modified</code> response HTTP header contains the datetime of the last modification of targeted resource
which should be taken from VERSION.commit_audit.time_committed.value.
An example of such header value format is:</p>
<pre><code class="language-http"><span class="hljs-attribute">Last-Modified</span>: <span class="hljs-string">Wed, 22 Jul 2009 19:15:56 GMT</span></code></pre>
<p>See more details on <a href="https://tools.ietf.org/html/rfc7232#section-2.2">RFC 7232</a>.</p>
<p>These headers SHOULD be present in all responses targeting VERSION, VERSIONED_OBJECT or other resources
that have unique identifier for each of the changes in time. The value of this header MAY be the
unique identifier of that resource (e.g. VERSIONED_OBJECT.uid.value, VERSION.uid.value, EHR.ehr_id.value, etc).</p>
</div></div><div class="middle"><div id="design-considerations-http-status-codes" class="resource"><h3 class="resource-heading">HTTP status codes <a href="#design-considerations-http-status-codes" class="permalink">&para;</a></h3><p>To indicate the status of the request or the executed operation, one of the following
subset of the HTTP status codes <a href="https://tools.ietf.org/html/rfc7231#section-6">RFC 7231</a> MUST be used:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Reason-Phrase</th>
<th>Meaning, usecase and details</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request succeeded, payload sent in a 200 response depends on the request method</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>The request has been fulfilled and has resulted in one or more new resources being created</td>
</tr>
<tr>
<td>204</td>
<td>No content</td>
<td>The request has been fulfilled and there is no additional content to send in the response payload body</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
<td>The service cannot or will not process the request due to something that is perceived to be a client error</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>If the service requires authorization, this indicates that the request has not been applied because it lacks valid authentication credentials for the target resource</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>The service understood the request but refuses to authorize it</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
<td>The origin service did not find the target resource or is not willing to disclose that one exists</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>The method received in the request-line is known by the origin service but not supported by the target resource</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable</td>
<td>The target resource does not have a current representation that would be acceptable to the user</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>Indicates that the request could not be processed because it might generate a duplicate or a conflict</td>
</tr>
<tr>
<td>412</td>
<td>Precondition Failed</td>
<td>One or more conditions given in the request header fields evaluated to false when tested on the server</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>The service is refusing the request because the payload is in a format not supported by this method on the target resource</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>The service encountered an unexpected condition that prevented it from fulfilling the request</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>The service does not support the functionality required to fulfill the request</td>
</tr>
</tbody>
</table>
<p>Meaning of these codes may be further detailed (nuanced) in this specification by particular responses.
If required, other status codes MAY be used by implementations as long as their usecase is not conflicting or overlapping with above codes.</p>
<p>In case of errors (HTTP codes 400-500), the services MAY return more details (if <code>Prefer: return=representation</code> request header is present).
Example:</p>
<blockquote>
<p>some codes/messages <a href="https://github.com/ppazos/cabolabs-ehrserver/wiki/API-error-codes-and-messages">https://github.com/ppazos/cabolabs-ehrserver/wiki/API-error-codes-and-messages</a> and
<a href="http://veratechnas1.synology.me:13606/InstanceValidator/rules.html">http://veratechnas1.synology.me:13606/InstanceValidator/rules.html</a></p>
</blockquote>
<pre><code class="language-json">{
    "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
    "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-number">90000</span></span>,
    "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_CODED_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
            "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"local"</span>
                </span>}</span>,
                "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"9000"</span>
            </span>}
        </span>},
        {
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_CODED_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Secondary error message"</span></span>,
            "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"local"</span>
                </span>}</span>,
                "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"8000"</span>
            </span>}
        </span>}
    ]
</span>}</code></pre>
</div></div><div class="middle"><div id="design-considerations-data-representation" class="resource"><h3 class="resource-heading">Data representation <a href="#design-considerations-data-representation" class="permalink">&para;</a></h3><p>Services MUST support at least one of the <strong>XML</strong> or <strong>JSON</strong> format for resource representation.</p>
<p><h3>XML Format</h3></p>
<p>When resources representation is serialized as XML, the result MUST be valid against <a href="http://www.openehr.org/releases/trunk/its/XML-schema/">published XSDs</a>.</p>
<p>A client MAY use the header <code>Content-Type: application/xml</code> in the requests to specify the XML payload format.
If the service cannot process the request payload as XML format is not supported, it MUST respond with HTTP status code<code>415 Unsupported Media Type</code>.</p>
<p>The <code>Accept: application/xml</code> SHOULD be used in the request by the client in order to specify the expected XML response format.
If the service cannot fulfill this aspect of the request, it MUST respond with HTTP status code <code>406 Not Acceptable</code>.
Proper header <code>Content-Type: application/xml</code> MUST be present in the response of the service
unless response has no body (status 204).</p>
<p><h3>JSON Format</h3></p>
<p>Attribute names must be lowercase <em>snake_case</em> names as specified in the equivalent RM type. For example:</p>
<pre><code class="language-json">{
    "<span class="hljs-attribute">category</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"event"</span></span>,
        "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
            </span>}</span>,
            "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"433"</span>
        </span>}
    </span>}
</span>}</code></pre>
<p>Metadata attributes (those that are not also RM attributes) will always be prefixed by a <code>'_'</code>.
One example is the <code>_type</code> attribute, which should be used to specify the RM type whenever polymorphism
is involved or the underlying definition in RM type is abstract
(dynamic type is different from the static type).
This follows same rule as for XML typing.
The value of this attribute MUST be the uppercase class name from the RM specification. For example:</p>
<pre><code class="language-json">{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Hello world!"</span>
</span>}</code></pre>
<p>The RM attributes (even required ones) that are <code>Null</code>, empty list or empty arrays SHOULD be absent when serialized as JSON.</p>
<p>The order of attributes in the resource MAY follow the order of attributes in the RM specification of the type of the resource, but this is not mandatory.</p>
<blockquote>
<p>tbd json-schema</p>
</blockquote>
<p>A client MAY use the header <code>Content-Type: application/json</code> in the requests to specify the JSON payload format.
If the service cannot process the request payload as JSON format is not supported, it MUST respond with HTTP status code <code>415 Unsupported Media Type</code>.</p>
<p>The <code>Accept: application/json</code> SHOULD be used in the request by the client in order to specify the expected JSON response format.
If the service cannot fulfill this aspect of the request, it MUST respond with HTTP status code <code>406 Not Acceptable</code>.
Proper header <code>Content-Type: application/json</code> MUST be present in the response of the service
unless response has no body (status 204).</p>
<p><h3>Datetime format</h3></p>
<p>Query parameters and path segments that are date, datetime, or timestamp, MUST always use the canonical ISO8601 extended format, e.g. 2016-06-23T13:42:16.117+02:00.</p>
<p>Any date, datetime or timestamp value provided by a create or update action inside the COMPOSITION content
will be preserved as it was sent by client (i.e. if COMPOSITION was saved as narrow format, it will always return the way it was).
However, the RECOMMENDED format is to use the ISO8601 extended format.</p>
<p><h3 id="representation-details-negotiation">Representation details negotiation <a href="#representation-details-negotiation" class="permalink">¶</a></h3></p>
<p>When using the HTTP methods to create or update a resource, the service SHOULD give clients the option for returning either a complete
representation of the (modified) resource, or a minimal or no content in the payload response (assuming the operation was successfully completed).
See <a href="https://tools.ietf.org/html/rfc7240#section-4.2">RFC 7240</a> for more details on how achieve this using <code>Prefer</code> header.
The client MAY choose followings:</p>
<ul>
<li>
<p>send <code>Prefer: return=minimal</code> to inform the service that prefers only a minimal response to a successful request.
A <code>Location</code> header indicating the direct URL to access the resource MUST be part of the service response.
If there is no payload content to be returned, the service SHOULD use HTTP status code <code>204 No Content</code>.</p>
</li>
<li>
<p>send <code>Prefer: return=representation</code> to inform the service that prefers a full representation response to a successful request.
A <code>Location</code> header indicating the direct URL to access the resource MAY be part of the service response
and the payload content SHOULD include a full representation.</p>
</li>
</ul>
<p>In case no <code>Prefer</code> header is present in request, the default response policy is <code>return=minimal</code>.</p>
<p>Another preference is related to following and resolving OBJ_REF identifiers. Under some circumstances a client
MAY indicate that prefers response containing full or partial resource representation instead of references to resources using OBJ_REF.
A typical case is a list of COMPOSITIONs part of an EHR, which, strictly following RM specification, should always return
list of OBJ_REF, but sometimes clients prefers to get COMPOSITIONs.
Services that have this capability implemented SHOULD accept and honor <code>Prefer: resolve_refs</code> request header.</p>
<pre><code class="language-http"><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return=representation, resolve_refs</span></code></pre>
</div></div><div class="middle"><section id="ehr" class="resource-group"><h2 class="group-heading">EHR <a href="#ehr" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="ehr-ehr" class="resource"><h3 class="resource-heading">EHR <a href="#ehr-ehr" class="permalink">&para;</a></h3><p>Release: <strong>0.9.5</strong></p>
<p>Management of EHRs.</p>
</div></div><div class="right"><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"ehr_status"</span>: {
      <span class="hljs-string">"subject"</span>: {
          <span class="hljs-string">"external_ref"</span>: {
            <span class="hljs-string">"id"</span>: {
              <span class="hljs-string">"_type"</span>: <span class="hljs-string">"GENERIC_ID"</span>,
              <span class="hljs-string">"value"</span>: <span class="hljs-string">"ins01"</span>,
              <span class="hljs-string">"scheme"</span>: <span class="hljs-string">"id_scheme"</span>
            },
            <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"ehr_craft"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>
          }
      },
      <span class="hljs-string">"other_details"</span>: {                           <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
        <span class="hljs-string">"items"</span>: {
          ...
        }
      },
      <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-string">"true"</span>,
      <span class="hljs-string">"is_queryable"</span>: <span class="hljs-string">"true"</span>
    }
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">201</span><span class="tab-button">400</span><span class="tab-button">409</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>201 Created</code> is returned when a new EHR has been successfully created.
The EHR resource is returned in the body when the <code>Prefer</code> header has the value of <code>return=representation</code>.
The default for <code>Prefer</code> header (or when <code>Prefer</code> header if missing) is <code>return=minimal</code>.
The <code>Location</code> header is always returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {...},
    <span class="hljs-string">"ehr_id"</span>: {...},
    <span class="hljs-string">"ehr_status"</span>: {...},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request body (if provided) could not be parsed.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>409 Conflict</code> Unable to create a new EHR due to a conflict with an already existing EHR
with the same subject id, namespace pair.</p>
</div></div></div></div></div></div></div></div><div class="middle"><div id="ehr-ehr-post" class="action post"><h4 class="action-heading"><div class="name">Create EHR</div><a href="#ehr-ehr-post" class="method post">POST</a><code class="uri">/ehr</code></h4><p>Create a new <code>EHR</code> with an auto-generated identifier.
Request body may contain <code>ehr_status</code> attribute. When provided it
will also be created as part of the same request,
otherwise default resources will be created automatically by the service
with the following defaults:</p>
<ul>
<li>
<p><code>is_queryable</code>: true</p>
</li>
<li>
<p><code>is_modifiable</code>: true</p>
</li>
</ul>
<p>All other attributes will be created as needed by the backend to ensure that a valid RM type instance is created.</p>
</div></div><hr class="split"><div class="right"><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span></span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">ehr_status</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">is_modifiable</span>": <span class="hljs-value"><span class="hljs-string">"true"</span>
      ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">201</span><span class="tab-button">400</span><span class="tab-button">409</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>201 Created</code> is returned when a new EHR has been successfully created.
The new EHR resource is returned in the body when the request’s <code>Prefer</code> header value is <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {},
    <span class="hljs-string">"ehr_id"</span>: {},
    <span class="hljs-string">"ehr_status"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when unable to parse the request body (if provided) or when supplied <code>ehr_id</code>
doesn’t follow the specification (<a href="http://www.openehr.org/releases/RM/latest/docs/support/support.html#_uid_based_id_class">http://www.openehr.org/releases/RM/latest/docs/support/support.html#_uid_based_id_class</a>).</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>409 Conflict</code> Unable to create a new EHR due to a conflict with an already existing EHR.
Can happen when the supplied ehr_id is already already used by an existing EHR.</p>
</div></div></div></div></div></div></div></div><div class="middle"><div id="ehr-ehr-put" class="action put"><h4 class="action-heading"><div class="name">Create EHR with id</div><a href="#ehr-ehr-put" class="method put">PUT</a><code class="uri">/ehr/{ehr_id}</code></h4><p>Create a new <code>EHR</code> with the specified EHR identifier.
Request body may contain <code>ehr_status</code> attribute. When provided it
will also be created as part of the same request,
otherwise default resources will be created automatically by the service
with the following defaults:</p>
<ul>
<li>
<p><code>is_queryable</code>: true</p>
</li>
<li>
<p><code>is_modifiable</code>: true</p>
</li>
</ul>
<p>All other attributes will be left empty (null).</p>
<p>It is recommended that the supplied <code>ehr_id</code> is a UUID, but other formats are also
allowed (<a href="http://www.openehr.org/releases/RM/latest/docs/support/support.html#_uid_based_id_class">http://www.openehr.org/releases/RM/latest/docs/support/support.html#_uid_based_id_class</a>)</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>User supplied EHR id</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is returned when the EHR resource is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {},
    <span class="hljs-string">"ehr_id"</span>: {},
    <span class="hljs-string">"ehr_status"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>,
    ... <span class="hljs-comment">// to be defined, possibly counts of compositions, contributions, etc.</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehr_id</code> does not exist.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr-ehr-get" class="action get"><h4 class="action-heading"><div class="name">Get EHR summary by id</div><a href="#ehr-ehr-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}</code></h4><p>Retrieve the EHR with the specified <code>ehr_id</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr?<span class="hljs-attribute">subject_id=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">subject_namespace=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is returned when the EHR resource is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {},
    <span class="hljs-string">"ehr_id"</span>: {},
    <span class="hljs-string">"ehr_status"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>,
    ... <span class="hljs-comment">// to be defined, possibly counts of compositions, contributions, etc.</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with supplied subject parameters does not exist.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr-ehr-get-1" class="action get"><h4 class="action-heading"><div class="name">Get EHR summary by subject id</div><a href="#ehr-ehr-get-1" class="method get">GET</a><code class="uri">/ehr{?subject_id,subject_namespace}</code></h4><p>Retrieve the EHR with the specified <code>subject_id</code> and <code>subject_namespace</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>subject_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>subject id</p>
</dd><dt>subject_namespace</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>subject namespace</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><section id="ehr_status" class="resource-group"><h2 class="group-heading">EHR_STATUS <a href="#ehr_status" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="ehr_status-ehr_status" class="resource"><h3 class="resource-heading">EHR_STATUS <a href="#ehr_status-ehr_status" class="permalink">&para;</a></h3><p>Release: <strong>0.9.5</strong></p>
<p>Management of EHR_STATUSes.</p>
</div></div><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/ehr_status?<span class="hljs-attribute">version_at_time=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">400</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is return with the EHR_STATUS resource in the body when it is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/ehr_status/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                     <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                       <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                           <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content such as an invalid <code>version_at_time</code> format.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> returned when <code>EHR</code> with <code>ehr_id</code> does not exist or
a version of an <code>EHR_STATUS</code> resource does not exist at the specified <code>version_at_time</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-ehr_status-get" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS version by time</div><a href="#ehr_status-ehr_status-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/ehr_status{?version_at_time}</code></h4><p>Retrieve the <code>EHR_STATUS</code> associated with the EHR specified by <code>ehr_id</code>.
When the <code>version_at_time</code> parameter is provided, the <code>EHR_STATUS</code> version that existed at the specified time is returned,
otherwise the latest trunk version is returned.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>version_at_time</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>A timestamp in the extended ISO8601 format</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/ehr_status/<span class="hljs-attribute" title="version_uid">version_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is return when the <code>EHR_STATUS</code> is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                     <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                       <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                           <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehr_id</code> does not exist or
an <code>EHR_STATUS</code> with <code>version_uid</code> does not exist.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-ehr_status-get-1" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS by version id</div><a href="#ehr_status-ehr_status-get-1" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/ehr_status/{version_uid}</code></h4><p>Retrieve the version of the <code>EHR_STATUS</code> associated with the specified <code>ehr_id</code> and <code>version_uid</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/ehr_status</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                       <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                    <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                         <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                             <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">400</span><span class="tab-button">404</span><span class="tab-button">412</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> return when <code>EHR_STATUS</code> resource is successfully updated.
The updated <code>EHR_STATUS</code> resource is returned in the body when <code>Prefer</code> header value is <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/ehr_status/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                       <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                    <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                         <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                             <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>204 No Content</code> is returned when <code>Prefer</code> header is missing or is set to <code>return=minimal</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/ehr_status/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when EHR with ehr_id does not exist.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>412 Precondition Failed</code> is returned when <code>If-Match</code> header doesn’t match the latest trunk version.
Returns latest trunk version in the <code>Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/ehr_status/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-ehr_status-put" class="action put"><h4 class="action-heading"><div class="name">Update EHR_STATUS</div><a href="#ehr_status-ehr_status-put" class="method put">PUT</a><code class="uri">/ehr/{ehr_id}/ehr_status</code></h4><p>Update <code>EHR_STATUS</code> associated with the specified <code>ehr_id</code>.
The existing latest <code>version_uid</code> of <code>EHR_STATUS</code> resource must be specified in the <code>If-Match</code> header.
The response will contain the updated <code>EHR_STATUS</code> resource when the <code>Prefer</code> header has a value of <code>return=representation</code></p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><div id="ehr_status-versioned_ehr_status" class="resource"><h3 class="resource-heading">VERSIONED_EHR_STATUS <a href="#ehr_status-versioned_ehr_status" class="permalink">&para;</a></h3><p>Management of VERSIONED_EHR_STATUSes.</p>
</div></div><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_ehr_status</span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested EHR’s <code>VERSIONED_EHR_STATUS</code> is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
   <span class="hljs-string">"uid"</span>: <span class="hljs-string">"_a_valid_uid_"</span>,                     <span class="hljs-comment">/* UUID or OID, UUID preferred */</span>
   <span class="hljs-string">"owner_id"</span>: <span class="hljs-string">"{ehr_id}"</span>,
   <span class="hljs-string">"time_created"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,             <span class="hljs-comment">/* ISO8601 YYYY-MM-DDThh:mm:ss.SSS(Z|[+-]hh:mm) e.g. 2017-08-01T01:06:46.000+00:00 */</span>
   <span class="hljs-string">"revision_history"</span>: {
     <span class="hljs-string">"items"</span>: [
       {
         <span class="hljs-string">"version_id"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,    <span class="hljs-comment">/* object_id::creating_system_id::version_tree_id */</span>
         <span class="hljs-string">"audits"</span>: [
           {
             <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
             <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
             <span class="hljs-string">"change_type"</span>: {
               <span class="hljs-string">"value"</span>: <span class="hljs-string">"String"</span>,              <span class="hljs-comment">/* value from openehr terminology, change_type http://openehr.org/releases/1.0.2/architecture/terminology.pdf */</span>
               <span class="hljs-string">"defining_code"</span>: {
                 <span class="hljs-string">"terminology_id"</span>: {
                   <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
                 },
                 <span class="hljs-string">"code_string"</span>: <span class="hljs-string">"String"</span>
               }
             },
             <span class="hljs-string">"description"</span>: {
               <span class="hljs-string">"value"</span>: <span class="hljs-string">"String"</span>
             }
           },
           {...},
           {...}
         ]
       },
       {...},
       {...}
     ]
   }
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehr_id</code> does not exist.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-versioned_ehr_status-get" class="action get"><h4 class="action-heading"><div class="name">Get versioned EHR_STATUS</div><a href="#ehr_status-versioned_ehr_status-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_ehr_status</code></h4><p>Retrieve <code>VERSIONED_EHR_STATUS</code> associated with an EHR specified by <code>ehr_id</code> including its <code>revision_history</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_ehr_status/version?<span class="hljs-attribute">version_at_time=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">400</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested <code>VERSION</code> is successfully retrieved, which is provided in the body.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/versioned_ehr_status/version/{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ORIGINAL_VERSION"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,                  <span class="hljs-comment">/* _ehr_status_uid_::_system_id_::1 _system_id_ is the ID of the system from which the EHR was created */</span>
  <span class="hljs-string">"contribution"</span>: <span class="hljs-string">"OBJECT_REF"</span>,
  <span class="hljs-string">"signature"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
    <span class="hljs-string">"subject"</span>: {
      <span class="hljs-string">"external_ref"</span>: {
        <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
        <span class="hljs-string">"id"</span>: {
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
        }
      }
    }
    <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"other_details"</span>: {                         <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
      <span class="hljs-string">"items"</span>: {
        ...
      }
    }
  },
  <span class="hljs-string">"commit_audit"</span>: {                            <span class="hljs-comment">/* the time committed attribute is set by the server */</span>
    <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"_a_string_id_"</span>,              <span class="hljs-comment">/* same as the container version.uid.system_id */</span>
    <span class="hljs-string">"change_type"</span>: {
      <span class="hljs-string">"value"</span>: <span class="hljs-string">"creation"</span>,
      <span class="hljs-string">"terminology_id"</span>: {
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
      },
      <span class="hljs-string">"code_string"</span>: <span class="hljs-string">"249"</span>
    },
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"optional description"</span>
  },
  <span class="hljs-string">"attestations"</span>: [
    {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"reason"</span>: <span class="hljs-string">"DV_TEXT"</span>,
      <span class="hljs-string">"proof"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"is_pending"</span>: <span class="hljs-string">"Boolean"</span>
    },
    {...},
    {...}
  ]
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request is invalid such as an invalid <code>version_at_time</code> value.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when <code>EHR</code> with <code>ehr_id</code> does not exist or
when <code>EHR_STATUS</code> does not exist at the specified <code>version_at_time</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-versioned_ehr_status-get-1" class="action get"><h4 class="action-heading"><div class="name">Get versioned EHR_STATUS version by time</div><a href="#ehr_status-versioned_ehr_status-get-1" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_ehr_status/version{?version_at_time}</code></h4><p>Retrieve the <code>VERSION</code> of an <code>EHR_STATUS</code> associated with the specified <code>ehr_id</code> at <code>version_at_time</code>.
When the <code>version_at_time</code> parameter is provided, the <code>VERSION</code> that existed at the specified version time is returned,
otherwise the latest trunk version is returned.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>version_at_time</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_ehr_status/version/<span class="hljs-attribute" title="version_uid">version_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested <code>VERSION</code> is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ORIGINAL_VERSION"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,                  <span class="hljs-comment">/* _ehr_status_uid_::_system_id_::1 _system_id_ is the ID of the system from which the EHR was created */</span>
  <span class="hljs-string">"contribution"</span>: {                            <span class="hljs-comment">/* does not include reference to other versions, even that is mandatory in the IM */</span>
    <span class="hljs-string">"uid"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
    <span class="hljs-string">"audit"</span>: {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
    }
  },
  <span class="hljs-string">"signature"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
    <span class="hljs-string">"subject"</span>: {
      <span class="hljs-string">"external_ref"</span>: {
        <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
        <span class="hljs-string">"id"</span>: {
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
        }
      }
    }
    <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"other_details"</span>: {                         <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
      <span class="hljs-string">"items"</span>: {
        ...
      }
    }
  },
  <span class="hljs-string">"commit_audit"</span>: {                            <span class="hljs-comment">/* the time committed attribute is set by the server */</span>
    <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"_a_string_id_"</span>,              <span class="hljs-comment">/* same as the container version.uid.system_id */</span>
    <span class="hljs-string">"change_type"</span>: {
      <span class="hljs-string">"value"</span>: <span class="hljs-string">"creation"</span>,
      <span class="hljs-string">"terminology_id"</span>: {
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
      },
      <span class="hljs-string">"code_string"</span>: <span class="hljs-string">"249"</span>
    },
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"optional description"</span>
  },
  <span class="hljs-string">"attestations"</span>: [
    {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"reason"</span>: <span class="hljs-string">"DV_TEXT"</span>,
      <span class="hljs-string">"proof"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"is_pending"</span>: <span class="hljs-string">"Boolean"</span>
    },
    {...},
    {...}
  ]
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehr_id</code> does not exist or <code>EHR_STATUS</code> with <code>version_uid</code> does not exist.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="ehr_status-versioned_ehr_status-get-2" class="action get"><h4 class="action-heading"><div class="name">Get versioned EHR_STATUS version by id</div><a href="#ehr_status-versioned_ehr_status-get-2" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_ehr_status/version/{version_uid}</code></h4><p>Retrieve <code>VERSION</code> of an <code>EHR_STATUS</code> associated with the specified <code>ehr_id</code> and <code>version_uid</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version uid</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><section id="composition" class="resource-group"><h2 class="group-heading">COMPOSITION <a href="#composition" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="composition-composition" class="resource"><h3 class="resource-heading">COMPOSITION <a href="#composition-composition" class="permalink">&para;</a></h3><p>Release: <strong>0.9.5</strong></p>
<p>Management of <a href="http://www.openehr.org/releases/RM/latest/docs/ehr/ehr.html#_composition_class">COMPOSITIONs</a>.</p>
</div></div><div class="right"><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/composition</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">with representation</span><span class="tab-button">wrong type</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
  </span>}</span>,
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::1"</span>
  </span>}</span>,
  "<span class="hljs-attribute">archetype_details</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">archetype_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openEHR-EHR-COMPOSITION.encounter.v1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">template_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Example.v1::c7ec861c-c413-39ff-9965-a198ebf44747"</span>
    </span>}</span>,
    "<span class="hljs-attribute">rm_version</span>": <span class="hljs-value"><span class="hljs-string">"1.0.2"</span>
  </span>}</span>,
  "<span class="hljs-attribute">archetype_node_id</span>": <span class="hljs-value"><span class="hljs-string">"openEHR-EHR-COMPOSITION.encounter.v1"</span></span>,
  "<span class="hljs-attribute">language</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"ISO_639-1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"en"</span>
  </span>}</span>,
  "<span class="hljs-attribute">territory</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"ISO_3166-1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"NL"</span>
  </span>}</span>,
  "<span class="hljs-attribute">category</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"event"</span></span>,
    "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
      </span>}</span>,
      "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"433"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">composer</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">external_ref</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"16b74749-e6aa-4945-b760-b42bdc07098a"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"example.domain.com"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"PERSON"</span>
    </span>}</span>,
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"A name"</span>
  </span>}</span>,
  "<span class="hljs-attribute">context</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">start_time</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2014-11-18T09:50:35.000+01:00"</span>
    </span>}</span>,
    "<span class="hljs-attribute">setting</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"other care"</span></span>,
      "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
        </span>}</span>,
        "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"238"</span>
      </span>}
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">content</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">201</span></div><div class="tab"><div><div class="inner"><div class="description"><p>New COMPOSITION was created. Content body is only returned when <code>Prefer</code> header has <code>return=representation</code>, otherwise only headers are returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
  </span>}</span>,
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::1"</span>
  </span>}</span>,
  "<span class="hljs-attribute">archetype_details</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">archetype_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openEHR-EHR-COMPOSITION.encounter.v1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">template_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Example.v1::c7ec861c-c413-39ff-9965-a198ebf44747"</span>
    </span>}</span>,
    "<span class="hljs-attribute">rm_version</span>": <span class="hljs-value"><span class="hljs-string">"1.0.2"</span>
  </span>}</span>,
  "<span class="hljs-attribute">archetype_node_id</span>": <span class="hljs-value"><span class="hljs-string">"openEHR-EHR-COMPOSITION.encounter.v1"</span></span>,
  "<span class="hljs-attribute">language</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"ISO_639-1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"en"</span>
  </span>}</span>,
  "<span class="hljs-attribute">territory</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"ISO_3166-1"</span>
    </span>}</span>,
    "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"NL"</span>
  </span>}</span>,
  "<span class="hljs-attribute">category</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"event"</span></span>,
    "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
      </span>}</span>,
      "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"433"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">composer</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">external_ref</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"16b74749-e6aa-4945-b760-b42bdc07098a"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"example.domain.com"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"PERSON"</span>
    </span>}</span>,
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"A name"</span>
  </span>}</span>,
  "<span class="hljs-attribute">context</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">start_time</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2014-11-18T09:50:35.000+01:00"</span>
    </span>}</span>,
    "<span class="hljs-attribute">setting</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"other care"</span></span>,
      "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
        </span>}</span>,
        "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"238"</span>
      </span>}
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">content</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"XYZ"</span></span>,
  "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">400</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p><code>400 Bad Request</code> either the body of the request could not be read (or converted to a COMPOSITION object) or there were COMPOSITION validation errors.</p>
</div><h5>Body</h5><pre><code>{ <span class="hljs-comment">/* see overview */</span>
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"Error message"</span>,
    <span class="hljs-string">"validationErrors"</span>: [
        <span class="hljs-string">"error1"</span>, <span class="hljs-string">"error2"</span>
    ]
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code>.</p>
</div></div></div></div></div></div></div></div><div class="middle"><div id="composition-composition-post" class="action post"><h4 class="action-heading"><div class="name">Create composition</div><a href="#composition-composition-post" class="method post">POST</a><code class="uri">/ehr/{ehr_id}/composition</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/composition/<span class="hljs-attribute" title="preceding_version_uid">preceding_version_uid</span></span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">full</span><span class="tab-button">wrong type</span><span class="tab-button">not found</span><span class="tab-button">version conflict</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return=representation</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div></div></div></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"XYZ"</span></span>,
  "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">400</span></div><div class="tab"><div><div class="inner"><div class="description"><p>Bad request: either the body of the request could not be read (or converted to a COMPOSITION object) or there were composition validation errors.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"error2"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no COMPOSITION with the supplied <code>object_id</code>.</p>
</div></div></div></div></div></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">409</span></div><div class="tab"><div><div class="inner"><div class="description"><p>Returned when supplied <code>version_uid</code> is not the latest version.
Returns latest version in the <code>Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="composition-composition-put" class="action put"><h4 class="action-heading"><div class="name">Update composition</div><a href="#composition-composition-put" class="method put">PUT</a><code class="uri">/ehr/{ehr_id}/composition/{preceding_version_uid}</code></h4><p>If the request body already contains a composition uid it must match the
<code>preceding_version_uid</code> in the URL.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>preceding_version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>identifier of the COMPOSITION to be updated.
This MUST be the last (most recent) version.</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/composition/<span class="hljs-attribute" title="preceding_version_uid">preceding_version_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">204</span><span class="tab-button">400</span><span class="tab-button">404</span><span class="tab-button">409</span></div><div class="tab"><div><div class="inner"><div class="description"><p>COMPOSITION was deleted.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>The composition with <code>preceding_version_uid</code> is already deleted.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no COMPOSITION with the supplied <code>preceding_version_uid</code>.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Returned when supplied <code>preceding_version_uid</code> doesn’t match the latest version.
Returns latest version in the <code>Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></div></div><div class="middle"><div id="composition-composition-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete composition</div><a href="#composition-composition-delete" class="method delete">DELETE</a><code class="uri">/ehr/{ehr_id}/composition/{preceding_version_uid}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>preceding_version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>identifier of the COMPOSITION to be updated.
This MUST be the last (most recent) version.</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/composition/<span class="hljs-attribute" title="version_uid">version_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Returned when the composition is deleted (logically).</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no COMPOSITION with the supplied <code>version_uid</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="composition-composition-get" class="action get"><h4 class="action-heading"><div class="name">Get composition by version id</div><a href="#composition-composition-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/composition/{version_uid}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSION identifier</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/composition/<span class="hljs-attribute" title="versioned_object_uid">versioned_object_uid</span>?<span class="hljs-attribute">version_at_time=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/composition/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>The COMPOSITION at specified <code>version_at_time</code> time has been deleted.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no VERSIONED_COMPOSITION with the supplied <code>versioned_object_uid</code> or
no COMPOSITION at specified <code>version_at_time</code> time.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="composition-composition-get-1" class="action get"><h4 class="action-heading"><div class="name">Get composition at time</div><a href="#composition-composition-get-1" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/composition/{versioned_object_uid}{?version_at_time}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>versioned_object_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION identifier taken from VERSIONED_COMPOSITION.uid.value</p>
</dd><dt>version_at_time</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>A timestamp in the ISO8601 format</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><div id="composition-versioned_composition" class="resource"><h3 class="resource-heading">VERSIONED_COMPOSITION <a href="#composition-versioned_composition" class="permalink">&para;</a></h3><p>This resource is related to <a href="http://www.openehr.org/releases/RM/latest/docs/ehr/ehr.html#_versioned_composition_class">VERSIONED_COMPOSITION</a> described in the openEHR specification</p>
</div></div><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_composition/<span class="hljs-attribute" title="versioned_object_uid">versioned_object_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/versioned_composition/{versioned_object_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"xxx"</span></span>,
    "<span class="hljs-attribute">owner_id</span>": <span class="hljs-value"><span class="hljs-string">"{ehr_id}"</span></span>,
    "<span class="hljs-attribute">time_created</span>": <span class="hljs-value"><span class="hljs-string">"ISO8601 timestamp"</span></span>,
    "<span class="hljs-attribute">revision_history</span>": <span class="hljs-value">[ // expanded
        ...
    ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no VERSIONED_COMPOSITION with the supplied <code>versioned_object_uid</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="composition-versioned_composition-get" class="action get"><h4 class="action-heading"><div class="name">Get versioned composition</div><a href="#composition-versioned_composition-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_composition/{versioned_object_uid}</code></h4><p>Gets a complete VERSIONED_COMPOSITION.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>versioned_object_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION identifier taken from VERSIONED_COMPOSITION.uid.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_composition/<span class="hljs-attribute" title="versioned_object_uid">versioned_object_uid</span>/version/<span class="hljs-attribute" title="version_uid">version_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"ORIGINAL_VERSION"</span></span>,
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
        </span>}
        ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no VERSIONED_COMPOSITION with the supplied <code>versioned_object_uid</code> or no VERSION with the supplied <code>versione_uid</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="composition-versioned_composition-get-1" class="action get"><h4 class="action-heading"><div class="name">Get versioned composition version by id</div><a href="#composition-versioned_composition-get-1" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_composition/{versioned_object_uid}/version/{version_uid}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>versioned_object_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION identifier taken from VERSIONED_COMPOSITION.uid.value</p>
</dd><dt>version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED identifier taken from VERSIONED.uid.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/versioned_composition/<span class="hljs-attribute" title="versioned_object_uid">versioned_object_uid</span>/version?<span class="hljs-attribute">version_at_time=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/versioned_composition/{versioned_object_uid}/version/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"ORIGINAL_VERSION"</span></span>,
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
        </span>}
        ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied <code>ehr_id</code> or no VERSIONED_COMPOSITION with the supplied <code>versioned_object_uid</code> or no VERSION with the supplied <code>versione_uid</code>.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="composition-versioned_composition-get-2" class="action get"><h4 class="action-heading"><div class="name">Get versioned composition version at time</div><a href="#composition-versioned_composition-get-2" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/versioned_composition/{versioned_object_uid}/version{?version_at_time}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>versioned_object_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION identifier taken from VERSIONED_COMPOSITION.uid.value</p>
</dd><dt>version_at_time</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>A timestamp in the ISO8601 format</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><section id="directory" class="resource-group"><h2 class="group-heading">DIRECTORY <a href="#directory" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="directory-directory" class="resource"><h3 class="resource-heading">Directory <a href="#directory-directory" class="permalink">&para;</a></h3><p>Release: <strong>0.9.5</strong></p>
</div></div><div class="right"><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/directory</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">201</span><span class="tab-button">400</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p>New directory was created. Content body is only returned when
<code>Prefer</code> header has <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Bad request - error creating a directory.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div></div></div></div></div><div class="middle"><div id="directory-directory-post" class="action post"><h4 class="action-heading"><div class="name">Create directory</div><a href="#directory-directory-post" class="method post">POST</a><code class="uri">/ehr/{ehr_id}/directory</code></h4><p>Creates a new <code>FOLDER</code> associated with the <code>ehr_id</code>.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/directory</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">400</span><span class="tab-button">404</span><span class="tab-button">412</span></div><div class="tab"><div><div class="inner"><div class="description"><p>Directory was updated.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Directory was updated.
Returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Bad request - error when updating a directory.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>If-Match</code> header doesn’t match the last version. Returns last version in the <code>Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="directory-directory-put" class="action put"><h4 class="action-heading"><div class="name">Update directory</div><a href="#directory-directory-put" class="method put">PUT</a><code class="uri">/ehr/{ehr_id}/directory</code></h4><p>Update <code>FOLDER</code> associated with the specified <code>ehr_id</code>.
The existing latest <code>version_uid</code> of <code>FOLDER</code> resource must be specified in the <code>If-Match</code> header.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/directory</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">{preceding_version_uid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">204</span><span class="tab-button">400</span><span class="tab-button">404</span><span class="tab-button">412</span></div><div class="tab"><div><div class="inner"><div class="description"><p>Directory was deleted.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Bad request - error deleting directory.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p><code>If-Match</code> header doesn’t match the last version. Returns
last version in the <code>Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="directory-directory-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete directory</div><a href="#directory-directory-delete" class="method delete">DELETE</a><code class="uri">/ehr/{ehr_id}/directory</code></h4><p>Delete <code>FOLDER</code> associated with the specified <code>ehr_id</code>.
The existing latest <code>version_uid</code> of <code>FOLDER</code> resource must be specified in the <code>If-Match</code> header.</p>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/directory/<span class="hljs-attribute" title="version_uid">version_uid</span>?<span class="hljs-attribute">path=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No Folder at provided path.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id or no directory with specified version_uid.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="directory-directory-get" class="action get"><h4 class="action-heading"><div class="name">Get folder in directory version</div><a href="#directory-directory-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/directory/{version_uid}{?path}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>version_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd><dt>path</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>path to a sub-folder</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/directory?<span class="hljs-attribute">version_at_time=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">path=</span><span class="hljs-literal"></span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">204</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/directory/{version_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{version_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>EHR has no directory at <code>version_at_time</code> time or no Folder at provided path.</p>
</div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div></div></div></div><div class="middle"><div id="directory-directory-get-1" class="action get"><h4 class="action-heading"><div class="name">Get folder in directory version at time</div><a href="#directory-directory-get-1" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/directory{?version_at_time,path}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>version_at_time</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>A timestamp in the extended ISO8601 format</p>
</dd><dt>path</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>path to a sub-folder</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><section id="contribution" class="resource-group"><h2 class="group-heading">CONTRIBUTION <a href="#contribution" class="permalink">&para;</a></h2></section></div><div class="middle"><div id="contribution-contribution" class="resource"><h3 class="resource-heading">CONTRIBUTION <a href="#contribution-contribution" class="permalink">&para;</a></h3><p>Release: <strong>0.9.5</strong></p>
</div></div><div class="right"><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/contribution</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">example 1</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"versions"</span>: [
        {
            <span class="hljs-string">"data"</span>: {
                <span class="hljs-comment">/* optional JSON serialized COMPOSITION, FOLDER or EHR_STATUS object */</span>
            },
            <span class="hljs-string">"preceding_version_uid"</span>: <span class="hljs-string">"&lt;optional string&gt;"</span>, 
            <span class="hljs-string">"signature"</span>: <span class="hljs-string">"&lt;optional string&gt;"</span>, 
            <span class="hljs-string">"lifecycle_state"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"commit_audit"</span>: {
                <span class="hljs-string">"change_type"</span>: {},
                <span class="hljs-string">"description"</span>: {},
                <span class="hljs-string">"committer"</span>: {
                    <span class="hljs-comment">/* optional structure - will use the outer committer if absent */</span>
                }
            }
        }
    ],
    <span class="hljs-string">"audit"</span>:{
        <span class="hljs-string">"committer"</span>:{
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"&lt;optional identifier of the committer&gt;"</span>  ,
            <span class="hljs-string">"external_ref"</span>:{
                <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"demographic"</span>,
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
                <span class="hljs-string">"id"</span>:{
                    <span class="hljs-string">"value"</span>: <span class="hljs-string">"&lt;OBJECT_ID&gt;"</span>
                }
            }
        }
    }
}</code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">201</span><span class="tab-button">400</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><div class="description"><p>New Contribution was created. Content body is only returned when <code>Prefer</code> header has <code>return=representation</code> otherwise only headers are returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/{ehr_id}/contribution/{contribution_uid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{contribution_uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"CONTRIBUTION"</span></span>,
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"0826851c-c4c2-4d61-92b9-410fb8275ff0"</span>
  </span>}</span>,
  "<span class="hljs-attribute">versions</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_REF"</span></span>,
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"fb458d9c-1323-42bc-b7f8-787f3660a0b5::91215053-854b-45b8-bb2a-3b0d255858d1::1"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"local"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span>
    </span>},
    {
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_REF"</span></span>,
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"abcdefgh-1323-42bc-b7f8-787f3660a0ba::91215053-854b-45b8-bb2a-3b0d255858d1::1"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"local"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"FOLDER"</span>
    </span>}
  ]</span>,
  "<span class="hljs-attribute">audit</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">system_id</span>": <span class="hljs-value"><span class="hljs-string">"9624982A-9F42-41A5-9318-AE13D5F5031F"</span></span>,
    "<span class="hljs-attribute">committer</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"PARTY_IDENTIFIED"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"bna"</span>
    </span>}</span>,
    "<span class="hljs-attribute">time_committed</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2017-08-15T10:37:15+02:00"</span>
    </span>}</span>,
    "<span class="hljs-attribute">change_type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"creation"</span></span>,
      "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
        </span>}</span>,
        "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"249"</span>
      </span>}
    </span>}</span>,
    "<span class="hljs-attribute">description</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"comment"</span>
    </span>}
  </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>Bad request: validation errors in one of the attached locatables, modification type doesn’t match the operation - i.e. first version
of a composition with MODIFICATION.</p>
</div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"errorN"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the given id</p>
</div></div></div></div></div></div></div></div><div class="middle"><div id="contribution-contribution-post" class="action post"><h4 class="action-heading"><div class="name">Create contribution</div><a href="#contribution-contribution-post" class="method post">POST</a><code class="uri">/ehr/{ehr_id}/contribution</code></h4><p>We will use the relaxed CONTRIBUTION XSD with the following attributes optional:</p>
<ul>
<li>
<p>time_committed: server will always set it</p>
</li>
<li>
<p>UID: if provided will be accepted unless it is already used in which case an error will be returned</p>
</li>
<li>
<p>system_id: where provided will be validated</p>
</li>
</ul>
<div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd></dl></div></div></div><hr class="split"><div class="right"><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api/v1</span>/ehr/<span class="hljs-attribute" title="ehr_id">ehr_id</span>/contribution/<span class="hljs-attribute" title="contribution_uid">contribution_uid</span></span></div><div class="tabs"><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span><span class="tab-button">404</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"CONTRIBUTION"</span></span>,
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"0826851c-c4c2-4d61-92b9-410fb8275ff0"</span>
  </span>}</span>,
  "<span class="hljs-attribute">versions</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_REF"</span></span>,
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"fb458d9c-1323-42bc-b7f8-787f3660a0b5::91215053-854b-45b8-bb2a-3b0d255858d1::1"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"local"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span>
    </span>},
    {
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_REF"</span></span>,
      "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"OBJECT_VERSION_ID"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"abcdefgh-1323-42bc-b7f8-787f3660a0ba::91215053-854b-45b8-bb2a-3b0d255858d1::1"</span>
      </span>}</span>,
      "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"local"</span></span>,
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"FOLDER"</span>
    </span>}
  ]</span>,
  "<span class="hljs-attribute">audit</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">system_id</span>": <span class="hljs-value"><span class="hljs-string">"9624982A-9F42-41A5-9318-AE13D5F5031F"</span></span>,
    "<span class="hljs-attribute">committer</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"PARTY_IDENTIFIED"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"bna"</span>
    </span>}</span>,
    "<span class="hljs-attribute">time_committed</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2017-08-15T10:37:15+02:00"</span>
    </span>}</span>,
    "<span class="hljs-attribute">change_type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"creation"</span></span>,
      "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
        </span>}</span>,
        "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"249"</span>
      </span>}
    </span>}</span>,
    "<span class="hljs-attribute">description</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-literal">null</span>
    </span>}
  </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div class="tab"><div><div class="inner"><div class="description"><p>No EHR with the supplied id or no Contribution with the supplied id was found</p>
</div></div></div></div></div></div></div><div class="middle"><div id="contribution-contribution-get" class="action get"><h4 class="action-heading"><div class="name">Get contribution by id</div><a href="#contribution-contribution-get" class="method get">GET</a><code class="uri">/ehr/{ehr_id}/contribution/{contribution_uid}</code></h4><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehr_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier taken from EHR.ehr_id.value</p>
</dd><dt>contribution_uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>CONTRIBUTION uid</p>
</dd></dl></div></div></div><hr class="split"><div class="middle"><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 06 Nov 2018</p></div></div></div></div><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get a list of direct child elements by class name.
*/
function childrenByClass(element, name) {
  var filtered = [];

  for (var i = 0; i < element.children.length; i++) {
    var child = element.children[i];
    var classNames = child.className.split(' ');
    if (classNames.indexOf(name) !== -1) {
      filtered.push(child);
    }
  }

  return filtered;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

function toggleTabButton(event) {
    var i, index;
    var button = event.target;

    // Get index of the current button.
    var buttons = childrenByClass(button.parentNode, 'tab-button');
    for (i = 0; i < buttons.length; i++) {
        if (buttons[i] === button) {
            index = i;
            button.className = 'tab-button active';
        } else {
            buttons[i].className = 'tab-button';
        }
    }

    // Hide other tabs and show this one.
    var tabs = childrenByClass(button.parentNode.parentNode, 'tab');
    for (i = 0; i < tabs.length; i++) {
        if (i === index) {
            tabs[i].style.display = 'block';
        } else {
            tabs[i].style.display = 'none';
        }
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i, j;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    var responseCodes = document.querySelectorAll('.example-names');
    for (i = 0; i < responseCodes.length; i++) {
        var tabButtons = childrenByClass(responseCodes[i], 'tab-button');
        for (j = 0; j < tabButtons.length; j++) {
            tabButtons[j].onclick = toggleTabButton;

            // Show by default?
            if (j === 0) {
                toggleTabButton({target: tabButtons[j]});
            }
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
};
</script></body></html>